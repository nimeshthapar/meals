"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[982],{708:function(e,r,n){n.r(r),n.d(r,{default:function(){return S}});var t=n(885),a=n(791),s=n(413),c=n(913),o=n(957),i=n(184),l=function(e){var r=(0,a.useContext)(c.A);return(0,i.jsxs)("div",{className:"cart-item",children:[(0,i.jsx)("h4",{children:e.name}),(0,i.jsxs)("div",{className:"total-price",children:[(0,i.jsx)("p",{children:e.price}),(0,i.jsx)("span",{children:"x"}),(0,i.jsxs)("div",{className:"cart-actions",children:[(0,i.jsx)(o.Z,{title:"-",inverse:!0,onClick:r.removeFromCart.bind(null,e.id)}),(0,i.jsx)("p",{children:e.quantity}),(0,i.jsx)(o.Z,{title:"+",onClick:r.addToCart.bind(null,(0,s.Z)((0,s.Z)({},e),{},{quantity:1}))})]})]}),(0,i.jsxs)("h4",{children:["\u20b9 ",e.price*e.quantity]})]})},u=n(520),d=function(e){return(0,i.jsxs)(u.Z,{className:"new-cart",children:[e.cartItems.map((function(e){return(0,i.jsx)(l,{id:e.id,price:e.price,quantity:e.quantity,name:e.name},e.id)})),(0,i.jsxs)("div",{className:"amount",children:[(0,i.jsxs)("h3",{children:["Total Amount: \u20b9 ",e.amount," "]}),(0,i.jsx)(o.Z,{title:"Clear Cart",onClick:e.onClear,inverse:!0}),(0,i.jsx)(o.Z,{title:"Order",onClick:e.onShow})]})]})},h=n(861),m=n(757),f=n.n(m),x=n(504),p=n(271),j=n(250),v=n(660),C=function(e){var r=(0,a.useRef)();return(0,a.useEffect)((function(){r.current.scrollIntoView({behaviour:"smooth"})}),[]),(0,i.jsxs)("div",{className:"order-item__box",children:[(0,i.jsxs)("p",{children:[e.name," x ",e.quantity]}),(0,i.jsx)("div",{ref:r})]})},Z=function(e){return(0,i.jsxs)("div",{className:"order-list",children:[e.cart.map((function(e){return(0,i.jsx)(C,{name:e.name,quantity:e.quantity,amount:e.amount})})),(0,i.jsxs)("h4",{children:["\u20b9 ",e.amount]})]})},b=n(172),N=function(e){var r=(0,a.useState)("null"),n=(0,t.Z)(r,2),s=n[0],c=n[1];return(0,i.jsxs)("div",{className:"order-container",children:[(0,i.jsx)("h4",{className:"order-main__heading",children:(0,i.jsx)("u",{children:"ORDERS"})}),e.orders.map((function(e){return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"order-item",onClick:function(){if(s===e._id)return c("");c(e._id)},children:[(0,i.jsx)("h3",{className:"order-heading",children:e.name}),(0,i.jsx)(b.Z,{})]}),s===e._id&&(0,i.jsx)(Z,{id:e._id,cart:e.cart,amount:e.amount})]},e._id)}))]})},g=function(e){var r=(0,a.useState)([]),n=(0,t.Z)(r,2),s=n[0],c=n[1],l=(0,a.useState)(e.show),d=(0,t.Z)(l,2),m=d[0],C=d[1],Z=(0,j.Z)(),b=Z.isLoading,g=Z.error,k=Z.sendRequest,y=Z.clearError,w=function(){var e=(0,h.Z)(f().mark((function e(){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=function(){var e=(0,h.Z)(f().mark((function e(){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=2;break}return e.abrupt("return",C(!1));case 2:return e.prev=2,e.next=5,k("".concat("https://mern-meal.herokuapp.com/api","/order"));case 5:r=e.sent,c(r),C(!0),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),r();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,i.jsxs)(i.Fragment,{children:[g&&(0,i.jsx)(v.Z,{error:g,onClose:y}),(0,i.jsxs)(u.Z,{className:"empty-cart",children:[(0,i.jsx)("img",{src:p,alt:"empty cart"}),(0,i.jsx)("h3",{children:"Oops!! Cart is Empty"}),(0,i.jsx)(x.rU,{to:"/",children:"Visit Home to Add Delicious Food"}),(0,i.jsxs)("div",{className:"order-btn",children:[(0,i.jsx)(o.Z,{onClick:w,title:m?"Close":"Previous 3 Orders"}),!b&&m&&0===s.length&&(0,i.jsx)("h1",{children:"No Orders Yet"}),b&&(0,i.jsx)("p",{className:"center",children:"Loading...."})]})]}),s.length>0&&m&&(0,i.jsx)(u.Z,{className:"order-card",children:!b&&s.length>0&&m&&(0,i.jsx)(N,{orders:s})})]})},k=n(982),y=a.forwardRef((function(e,r){return(0,i.jsxs)("div",{className:"form-control",children:[(0,i.jsx)("label",{htmlFor:e.for,children:e.label}),!e.textarea&&(0,i.jsx)("input",{type:"text",placeholder:e.placeholder,ref:r}),e.textarea&&(0,i.jsx)("textarea",{rows:e.rows||3,placeholder:e.placeholder,ref:r})]})})),w=function(e){var r=a.createRef(),n=a.createRef(),t=a.createRef(),s=(0,a.useContext)(c.A),l=(0,j.Z)(),d=l.isLoading,m=l.error,x=l.sendRequest,p=l.clearError,C=function(){var a=(0,h.Z)(f().mark((function a(c){var o,i,l;return f().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c.preventDefault(),o=r.current.value,i=n.current.value,l=t.current.value,a.next=6,x("".concat("https://mern-meal.herokuapp.com/api","/order"),"POST",JSON.stringify({name:o,address:i,instructions:l,cart:(0,k.Z)(s.cartItems),amount:s.totalAmount}),{"Content-Type":"application/json"});case 6:e.clearCart();case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return(0,i.jsxs)(i.Fragment,{children:[m&&(0,i.jsx)(v.Z,{error:m,onClose:p}),(0,i.jsx)(u.Z,{className:"order",children:(0,i.jsxs)("form",{onSubmit:C,children:[(0,i.jsx)(y,{for:"name",label:"Name",placeholder:"Enter your Full Name",ref:r}),(0,i.jsx)(y,{for:"address",label:"Address",placeholder:"Enter your Full Address",ref:n,textarea:!0}),(0,i.jsx)(y,{for:"insturctions",label:"Special Instructions",placeholder:"Any Special Instructions",ref:t,textarea:!0}),(0,i.jsxs)("div",{className:"center",children:[(0,i.jsxs)("h3",{children:["Total Amount: \u20b9 ",e.amount," "]}),(0,i.jsx)(o.Z,{title:"Back To Cart",onClick:e.onBack,inverse:!0}),(0,i.jsx)(o.Z,{type:"submit",title:d?"Proceeding...":"Proceed"})]})]})})]})},S=function(){var e=(0,a.useState)(!1),r=(0,t.Z)(e,2),n=r[0],s=r[1],o=(0,a.useContext)(c.A);return(0,i.jsxs)(i.Fragment,{children:[!n&&o.cartItems.length>0&&(0,i.jsx)(d,{cartItems:o.cartItems,amount:o.totalAmount,onShow:function(){return s(!0)},onClear:o.clearCart}),0===o.cartItems.length&&!n&&(0,i.jsx)(g,{show:!1}),n&&o.cartItems.length>0&&(0,i.jsx)(w,{amount:o.totalAmount,onBack:function(){return s(!1)},clearCart:function(){o.clearCart(),s(!1)}})]})}},957:function(e,r,n){n.d(r,{Z:function(){return a}});n(791);var t=n(184),a=function(e){return(0,t.jsx)("button",{type:e.type||"button",onClick:e.onClick,className:e.disabled?"disabled":e.inverse?"button inverse":"button",children:e.title})}},520:function(e,r,n){n.d(r,{Z:function(){return a}});n(791);var t=n(184),a=function(e){return(0,t.jsx)("div",{className:"card ".concat(e.className," "),children:e.children})}},660:function(e,r,n){n.d(r,{Z:function(){return u}});var t=n(413),a=(n(791),n(164)),s=n(80),c=n(957),o=n(520),i=n(184),l=function(e){var r=(0,i.jsx)("div",{className:"overlay",children:(0,i.jsxs)(o.Z,{className:"modal-card",children:[(0,i.jsx)("header",{className:"modal-header ".concat(e.headerClass),children:(0,i.jsx)("h3",{children:"Oops !!\ud83d\ude22"})}),(0,i.jsx)("main",{className:"main ".concat(e.mainClass),children:e.error}),(0,i.jsx)("footer",{className:"footer ".concat(e.footerClass),children:(0,i.jsx)(c.Z,{title:"Close",onClick:e.onClose})})]})});return a.createPortal(r,document.getElementById("overlay-root"))},u=function(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.Z,{onClose:e.onClose}),(0,i.jsx)(l,(0,t.Z)({},e))]})}},250:function(e,r,n){var t=n(861),a=n(885),s=n(757),c=n.n(s),o=n(791);r.Z=function(){var e=(0,o.useState)(!1),r=(0,a.Z)(e,2),n=r[0],s=r[1],i=(0,o.useState)(null),l=(0,a.Z)(i,2),u=l[0],d=l[1],h=(0,o.useRef)([]),m=(0,o.useCallback)(function(){var e=(0,t.Z)(c().mark((function e(r){var n,t,a,o,i,l,u=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:"GET",t=u.length>2&&void 0!==u[2]?u[2]:null,a=u.length>3&&void 0!==u[3]?u[3]:{},s(!0),o=new AbortController,h.current.push(o),e.prev=6,e.next=9,fetch(r,{method:n,body:t,headers:a,signal:o.signal});case 9:return i=e.sent,e.next=12,i.json();case 12:if(l=e.sent,h.current=h.current.filter((function(e){return e!==o})),i.ok){e.next=16;break}throw new Error(l.message);case 16:return s(!1),e.abrupt("return",l);case 20:throw e.prev=20,e.t0=e.catch(6),d(e.t0.message),s(!1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(r){return e.apply(this,arguments)}}(),[]);return(0,o.useEffect)((function(){return function(){h.current.forEach((function(e){return e.abort()}))}}),[]),{isLoading:n,error:u,sendRequest:m,clearError:function(e){d(null)}}}},271:function(e,r,n){e.exports=n.p+"static/media/cart.e3bf191db790e67a4c97.jpg"}}]);
//# sourceMappingURL=982.27718fab.chunk.js.map